name: Wired Chaos 3DT worker

on:
  workflow_dispatch:
    inputs:
      watch:
        description: "Continuously watch for queued jobs"
        default: "false"
        required: false
      poll_seconds:
        description: "Polling interval when watch is enabled"
        default: "5"
        required: false

jobs:
  execute:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Run Wired Chaos 3DT worker
        run: |
          python -m pip install --upgrade pip
          python scripts/wired_chaos_3dt_worker.py \
            $( [ "${{ github.event.inputs.watch }}" = "true" ] && echo --watch ) \
            --poll-seconds "${{ github.event.inputs.poll_seconds }}" \
            --verbose
